window.__require=function t(e,o,n){function i(c,l){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!l&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var a=o[c]={exports:{}};e[c][0].call(a.exports,function(t){return i(e[c][1][t]||t)},a,a.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AspectRatio:[function(t,e,o){"use strict";cc._RF.push(e,"65119xdigNFOYyjk00SUvV6","AspectRatio");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,l=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maintainAspectByHeight=!0,e}return i(e,t),e.prototype.onEnable=function(){this.adjustAspectRatio(),cc.view.on("resize",this.adjustAspectRatio,this)},e.prototype.onDisable=function(){cc.view.off("resize",this.adjustAspectRatio,this)},e.prototype.adjustAspectRatio=function(){var t=this.node,e=t.parent;if(e){var o=e.getContentSize(),n=t.getContentSize();if(this.maintainAspectByHeight){var i=o.height/n.height;t.setScale(i)}else i=o.width/n.width,t.setScale(i)}},e.prototype.toggleAspectByHeight=function(t){this.maintainAspectByHeight=t,this.adjustAspectRatio()},r([s],e.prototype,"maintainAspectByHeight",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],BoardCell:[function(t,e,o){"use strict";cc._RF.push(e,"9fb2fkamlREdLhWDIBse+6s","BoardCell");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./SudokuGameController"),l=cc._decorator,s=l.ccclass,u=l.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.label=null,e.selectedBG="#F9A826",e.highlightColor="#6C63FF",e.defaultUIeditableBGcolor="#808080",e.defaultUiNONeditableBGcolor="#D3D3D3",e.highlightUIForNonEditable="#F9A826",e}return i(e,t),e.prototype.start=function(){},e.prototype.SetData=function(t,e,o,n){null!=t&&null!=t&&null!=e&&null!=e&&null!=o&&null!=o&&null!=n&&null!=n&&(this.row=t,this.col=e,this.text=o,this.editable=n,this.SetUI())},e.prototype.updateText=function(t){this.text=t,this.label.string=this.text},e.prototype.SetUI=function(){console.log("SETUI"),this.label.string=this.text,this.defaultUI()},e.prototype.OnClicked=function(){c.default.Instance.node.emit("cellClicked",this.row,this.col,this.text)},e.prototype.SelectedUI=function(){this.bg.color=cc.color().fromHEX(this.selectedBG)},e.prototype.HighlightedUI=function(){this.bg.color=cc.color().fromHEX(this.highlightColor)},e.prototype.HighlightUIForNonEditable=function(t,e){""!=this.text&&this.text==t&&(1==e?this.bg.color=cc.color().fromHEX(this.highlightUIForNonEditable):this.defaultUI())},e.prototype.defaultUI=function(){0==this.editable?this.bg.color=cc.color().fromHEX(this.defaultUIeditableBGcolor):this.bg.color=cc.color().fromHEX(this.defaultUiNONeditableBGcolor)},e.prototype.onEnable=function(){c.default.Instance.node.on("nonEditableClicked",this.HighlightUIForNonEditable,this)},e.prototype.onDisable=function(){c.default.Instance.node.off("nonEditableClicked")},r([u(cc.Node)],e.prototype,"bg",void 0),r([u(cc.Label)],e.prototype,"label",void 0),r([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./SudokuGameController":"SudokuGameController"}],FitNode:[function(t,e,o){"use strict";cc._RF.push(e,"13b305WsdtEeLwOSiLHtst6","FitNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,l=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fitWidth=!0,e.fitHeight=!0,e}return i(e,t),e.prototype.start=function(){this.fitNodeToScreen(),cc.view.on("resize",this.fitNodeToScreen,this)},e.prototype.fitNodeToScreen=function(){var t=cc.Canvas.instance.designResolution,e=cc.view.getVisibleSize(),o=e.width/t.width,n=e.height/t.height;this.fitWidth&&this.fitHeight?this.node.scale=Math.min(o,n):this.fitWidth?(this.node.scaleX=o,this.node.scaleY=this.node.scaleX):this.fitHeight&&(this.node.scaleY=n,this.node.scaleX=this.node.scaleY)},e.prototype.onDestroy=function(){cc.view.off("resize",this.fitNodeToScreen,this)},r([s],e.prototype,"fitWidth",void 0),r([s],e.prototype,"fitHeight",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],MyButton:[function(t,e,o){"use strict";cc._RF.push(e,"9cb357gT5VInLLT8Nc1fu/K","MyButton");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./SudokuGameController"),l=cc._decorator,s=l.ccclass,u=l.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.data="",e}return i(e,t),e.prototype.start=function(){},e.prototype.SetData=function(t){this.label.string=t,this.data=t},e.prototype.disableTouch=function(){this.node.getComponent(cc.Button).interactable=!1,this.node.getComponentInChildren(cc.Sprite).node.color=cc.color().fromHEX("#ffffff"),this.label.node.color=cc.color().fromHEX("#000000")},e.prototype.enableTouch=function(){this.node.getComponent(cc.Button).interactable=!0,this.node.getComponentInChildren(cc.Sprite).node.color=cc.color().fromHEX("#6C63FF"),this.label.node.color=cc.color().fromHEX("#ffffff")},e.prototype.onClick=function(){c.default.Instance.node.emit("onnumberbuttonclicked",this.data)},r([u(cc.Label)],e.prototype,"label",void 0),r([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./SudokuGameController":"SudokuGameController"}],SudokuGameController:[function(t,e,o){"use strict";cc._RF.push(e,"c62f1qKix5GQJ+z4DQ5+ZNV","SudokuGameController");var n,i,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},l=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],c=0,l=r.length;c<l;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.MAIN_MENU=0]="MAIN_MENU",t[t.NEW_GAME=1]="NEW_GAME",t[t.RESULT=3]="RESULT"}(i||(i={}));var s=t("./BoardCell"),u=t("./MyButton"),a=cc._decorator,h=a.ccclass,p=a.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodepool=[],e.buttonPrefab=null,e.boardNode=null,e.currentSelected=null,e.ButtonsParent=null,e.ButtonsPrefab=null,e.playMenu=null,e.resultScreen=null,e.resultScreenLabel=null,e.topMenu=null,e.buttonNodepool=[],e.currentState=null,e}var o;return r(e,t),o=e,e.prototype.switchState=function(t){switch(this.currentState=t,this.currentState){case i.MAIN_MENU:this.resultScreen.active=!1,this.playMenu.active=!0,this.topMenu.active=!1;break;case i.NEW_GAME:this.resultScreen.active=!1,this.playMenu.active=!1,this.topMenu.active=!1,this.OnNewGameState();break;case i.RESULT:this.playMenu.active=!1,this.resultScreen.active=!0,this.SetResultScreen(),this.topMenu.active=!1}},e.prototype.SetResultScreen=function(){for(var t="",e=0;e<this.nodepool.length;e++)for(var o=0;o<this.nodepool[0].length;o++){var n=this.nodepool[e][o].getComponent(s.default).text;""==n&&(n="0"),t+=n}console.log("Result: "+t),g.clearSolution(),g.solveSudokuFindAllSolutions(this.sudoku,0,0);var i;i=-1==g.getSolutions().indexOf(t)?"Incorrect":"correct",this.resultScreenLabel.string=i},e.prototype.OnNumberClicked=function(t){var e=JSON.parse(this.currentSelected),o=this.nodepool[e.row][e.col].getComponent(s.default);1==o.editable&&o.updateText(t)},e.prototype.onEnable=function(){this.node.on("cellClicked",this.OnCellClicked,this),this.node.on("onnumberbuttonclicked",this.OnNumberClicked,this)},e.prototype.onDisable=function(){this.node.off("cellClicked",this.OnCellClicked,this),this.node.off("onnumberbuttonclicked")},e.prototype.OnCellClicked=function(t,e,o){console.log("cliked on: "+t+" "+e);var n=this.nodepool[t][e].getComponent(s.default);if(null!=this.currentSelected){var i=JSON.parse(this.currentSelected);this.node.emit("nonEditableClicked",this.nodepool[i.row][i.col].getComponent(s.default).text,!1),this.nodepool[i.row][i.col].getComponent(s.default).defaultUI()}this.currentSelected=JSON.stringify({row:t,col:e}),this.CloseAllHighlightedCells(),n.editable?(this.ToggleButtonTouch(!0),n.SelectedUI(),this.HighlightRowColSubArray(t,e)):""!=o&&(this.ToggleButtonTouch(!1),n.SelectedUI(),this.node.emit("nonEditableClicked",o,!0))},e.prototype.CloseAllHighlightedCells=function(){var t=this;this.currenthighlightedCells.forEach(function(e,o){var n=JSON.parse(o);t.nodepool[n.row][n.col].getComponent(s.default).defaultUI()}),this.currenthighlightedCells.clear()},e.prototype.HighLightCell=function(t,e){this.currenthighlightedCells.set(JSON.stringify({row:t,col:e}),!0),this.nodepool[t][e].getComponent(s.default).HighlightedUI()},e.prototype.HighlightRowColSubArray=function(t,e){for(var o=0;o<this.nodepool.length;o++)o!=t&&this.HighLightCell(o,e);for(o=0;o<this.nodepool[0].length;o++)o!=e&&this.HighLightCell(t,o);var n=3*Math.floor(t/3),i=3*Math.floor(e/3);for(o=n;o<n+3;o++)for(var r=i;r<i+3;r++)o!=t&&r!=e&&this.HighLightCell(o,r)},e.prototype.OnNewGameState=function(){this.sudoku=d.getInstance().generateSudoku(),this.SetBoard(this.sudoku)},e.prototype.SetBoard=function(){var t=null,e=null,o=d.getInstance().getSolution();this.displayarray(o);for(var n=0,i=0;i<9;i++)for(var r=0;r<9;r++){var c=null,l=null;if(0!=this.sudoku[i][r])c=this.sudoku[i][r],l=!1;else{c="",l=!0;var u={row:i,col:r};t=JSON.stringify(u),e=c}n++,this.nodepool[i][r].getComponent(s.default).SetData(i,r,c,l)}console.log("Count "+n),this.currentSelected=null;var a=JSON.parse(t);this.OnCellClicked(a.row,a.col,e),this.currentSelected=t,this.ToggleButtonTouch(!0)},e.prototype.start=function(){o.Instance=this,this.currenthighlightedCells=new Map;for(var t=0;t<9;t++)this.nodepool[t]=new Array(9).fill(null);for(t=0;t<9;t++)for(var e=0;e<9;e++){var n=cc.instantiate(this.buttonPrefab);this.nodepool[t][e]=n,n.setParent(this.boardNode)}for(t=0;t<9;t++){var r=cc.instantiate(this.ButtonsPrefab);r.active=!0,r.setParent(this.ButtonsParent),r.getComponent(u.default).SetData(""+(t+1)),r.getComponent(u.default).disableTouch(),this.buttonNodepool.push(r)}this.switchState(i.MAIN_MENU)},e.prototype.OnPlayButtonClicked=function(){this.switchState(i.NEW_GAME)},e.prototype.OnSubmitButtonClicked=function(){this.switchState(i.RESULT)},e.prototype.OnMenuClicked=function(){if(console.log("canvas height "+cc.Canvas.instance.node.height),console.log("canvas width "+cc.Canvas.instance.node.width),0==this.topMenu.active){this.topMenu.active=!0,console.log("canvas height "+cc.Canvas.instance.node.height),console.log("canvas width "+cc.Canvas.instance.node.width);var t=cc.view.getVisibleSize();this.topMenu.height=t.height,this.topMenu.width=t.width}else this.topMenu.active=!1},e.prototype.OnMenuOutsideClicked=function(){this.topMenu.active=!1},e.prototype.OnResetButtonClicked=function(){this.SetBoard(this.sudoku),this.topMenu.active=!1,this.resultScreen.active=!1},e.prototype.ToggleButtonTouch=function(t){for(var e=0;e<this.buttonNodepool.length;e++)1==t?this.buttonNodepool[e].getComponent(u.default).enableTouch():this.buttonNodepool[e].getComponent(u.default).disableTouch()},e.prototype.displayarray=function(t){for(var e=0;e<9;e++){for(var o="",n=0;n<9;n++)o=o+" "+t[e][n];console.log(o)}},e.Instance=null,c([p(cc.Prefab)],e.prototype,"buttonPrefab",void 0),c([p(cc.Node)],e.prototype,"boardNode",void 0),c([p(cc.Node)],e.prototype,"ButtonsParent",void 0),c([p(cc.Prefab)],e.prototype,"ButtonsPrefab",void 0),c([p(cc.Node)],e.prototype,"playMenu",void 0),c([p(cc.Node)],e.prototype,"resultScreen",void 0),c([p(cc.Label)],e.prototype,"resultScreenLabel",void 0),c([p(cc.Node)],e.prototype,"topMenu",void 0),o=c([h],e)}(cc.Component);o.default=f;var d=function(){function t(){}return t.prototype.getSolution=function(){return this.solution},t.getInstance=function(){return null!=t.instance&&null!=t.instance||(t.instance=new t),t.instance},t.prototype.generateSudoku=function(){this.grid=[];for(var t=0;t<9;t++)this.grid.push(new Array(9).fill(0));g.solveSudoku(this.grid,0,0);var e=this.grid.map(function(t){return l(t)});for(this.solution=this.grid.map(function(t){return l(t)}),t=0;t<45;t++){var o=Math.floor(9*Math.random()),n=Math.floor(9*Math.random());e[o][n]=0}return e},t.instance=null,t}(),g=function(){function t(){}return t.isSafe=function(t,e,o,n){for(var i=!0,r=0;r<t.length;r++)if(t[r][o]===n){i=!1;break}if(i)for(r=0;r<t[0].length;r++)if(t[e][r]===n){i=!1;break}if(i){var c=3*Math.floor(e/3),l=3*Math.floor(o/3);for(r=c;r<c+3;r++){for(var s=l;s<l+3;s++)if(t[r][s]===n){i=!1;break}if(!i)break}}return i},t.solveSudoku=function(e,o,n){if(o===e.length)return!0;var i=0,r=0;if(n===e[0].length-1?(r=0,i=o+1):(r=n+1,i=o),e[o][n]>0)return t.solveSudoku(e,i,r);for(var c=[1,2,3,4,5,6,7,8,9];c.length>0;){var l=Math.floor(Math.random()*c.length),s=c[l];if(t.isSafe(e,o,n,s)){if(e[o][n]=s,t.solveSudoku(e,i,r))return!0;e[o][n]=0}c.splice(l,1)}return!1},t.clearSolution=function(){t.solutions=[]},t.getSolutions=function(){return t.solutions},t.solveSudokuFindAllSolutions=function(e,o,n){var i="";if(o!==e.length){var r=0,c=0;if(n===e[0].length-1?(c=0,r=o+1):(c=n+1,r=o),e[o][n]>0)t.solveSudokuFindAllSolutions(e,r,c);else for(var l=1;l<10;l++)t.isSafe(e,o,n,l)&&(e[o][n]=l,t.solveSudokuFindAllSolutions(e,r,c),e[o][n]=0)}else{for(var s=0;s<e.length;s++)i+=e[s].join("");t.solutions.push(i)}},t.solutions=[],t}();cc._RF.pop()},{"./BoardCell":"BoardCell","./MyButton":"MyButton"}]},{},["AspectRatio","BoardCell","FitNode","MyButton","SudokuGameController"]);